/*
 * This file was generated by the Gradle 'init' task.
 */
apply plugin: 'de.Ste3et_C0st.furniture.java-conventions'

buildscript {
  repositories {
    maven {
      url "https://plugins.gradle.org/m2/"
    }

  }
  dependencies {
    classpath "com.gradleup.shadow:shadow-gradle-plugin:9.2.2"
  }
}

apply plugin: 'com.gradleup.shadow'

repositories {
    mavenLocal()
    
    maven {
    	url = uri('https://repo.extendedclip.com/content/repositories/placeholderapi/')
    }
}

dependencies {
	compileOnly group: 'org.spigotmc', name: 'spigot-api', version: gradle.minecraftVersion
    
    implementation "com.zaxxer:HikariCP:4.0.3"
    implementation "org.slf4j:slf4j-simple:1.7.5"
    implementation "net.kyori:adventure-text-minimessage:4.25.0"
    implementation "net.kyori:adventure-platform-bukkit:4.4.1"
    implementation "net.kyori:adventure-text-serializer-legacy:4.25.0"
    implementation "net.kyori:adventure-text-serializer-plain:4.25.0"

    compileOnly 'com.github.MilkBowl:VaultAPI:1.7'
    compileOnly 'com.gitlab.Ste3et_C0st.protectionlib:Core:v1.4'
    compileOnly 'com.github.BeYkeRYkt.LightAPI:lightapi-bukkit-common:5.1.0-Bukkit'
    compileOnly 'com.github.BeYkeRYkt.LightAPI:lightapi-bukkit-backward-support:5.1.0-Bukkit'
    compileOnly 'me.clip:placeholderapi:2.11.6'
    
    //temp local depenceys
    compileOnly files('tempDependenys/ProtocolLib.jar')
    compileOnly files('tempDependenys/floodgateAPI.jar')
}

shadowJar {
   mergeServiceFiles()
   archiveBaseName.set('FurnitureLib-Core')
   version= ""
   archiveClassifier.set('')
   
   relocate 'com.zaxxer.hikari', 'de.Ste3et_C0st.FurnitureLib.Database.com.zaxxer.hikari'
   relocate 'net.kyori', 'de.Ste3et_C0st.FurnitureLib.Paper.net.kyori'
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}

sourceSets {
    main {
        java {
            srcDirs= ["src/main/java"]
            exclude 'de/Ste3et_C0st/ProtectionLibRework/**'
        }
        resources {
            srcDirs= ["src/main/resources"]
        }
    }
}

tasks {
   jar {
	   enabled = false
   }
   
   assemble{
    	dependsOn(shadowJar)
   }
}

description = 'FurnitureLib-Core'