/*
 * This file was generated by the Gradle 'init' task.
 */

buildscript {
  repositories {
    maven {
      url "https://plugins.gradle.org/m2/"
    }

  }
  dependencies {
    classpath "com.gradleup.shadow:shadow-gradle-plugin:9.2.2"
  }
}

apply plugin: 'de.Ste3et_C0st.furniture.java-conventions'
apply plugin: 'com.github.johnrengelman.shadow'

dependencies {
    implementation project(path: ':FurnitureLib-Core', configuration: 'shadow')
    implementation project(path: ':FurnitureLib-Paper')
    implementation project(path: ':FurnitureLib-Folia')
}

tasks {
   jar {
	   enabled = true
   }
   
   assemble{
    	dependsOn(shadowJar)
   }
}

shadowJar {
   mergeServiceFiles()
   archiveClassifier.set('')
   
   dependencies {
	   exclude(dependency('com.zaxxer:.*'))
	   exclude(dependency('net.kyori:.*'))
   }
}

subprojects.each {
	subproject -> {
		evaluationDependsOn(subproject.path)
	}
}

task copyJarToBin {
	copy {
	    from "build/libs/${project.name}-${project.version}.jar"
	    into "build/libs/"
	    rename { String fileName ->
        	fileName.replace("-$project.version", "")
    	}
	}
}